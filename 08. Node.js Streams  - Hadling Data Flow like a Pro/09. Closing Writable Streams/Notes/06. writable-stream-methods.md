### **Writable Stream Methods in Node.js** ğŸš€  

A **writable stream** in Node.js provides several methods that help in writing, managing, and closing the stream efficiently. Below is a complete breakdown of all important methods of `writableStream` along with **when and how to use them**.

---

## **1ï¸âƒ£ writeStream.write(chunk, [encoding], [callback])**  
âœ… **Purpose:** Writes data to the stream.  
âœ… **Returns:** `true` if the data was written immediately, `false` if the internal buffer is full and should drain before more writes.  
âœ… **When to Use:** Use this when you need to send data into the writable stream.  

ğŸ”¹ **Example:**  
```javascript
const fs = require('fs');

const writeStream = fs.createWriteStream('output.txt');

const canWrite = writeStream.write('Hello, World!\n', 'utf8', () => {
    console.log('Data written successfully!');
});

console.log('Can write immediately:', canWrite);

writeStream.end();
```
---

## **2ï¸âƒ£ writeStream.end([chunk], [encoding], [callback])**  
âœ… **Purpose:** Signals the end of writing. Optionally, you can pass a final chunk of data.  
âœ… **When to Use:** When you have finished writing data and want to **close** the stream.  

ğŸ”¹ **Example:**  
```javascript
writeStream.end('Final data!\n', 'utf8', () => {
    console.log('Stream closed after writing final data!');
});
```
---

## **3ï¸âƒ£ writeStream.cork()**  
âœ… **Purpose:** Temporarily **buffers writes**, improving efficiency by reducing the number of system calls.  
âœ… **When to Use:** When you need to write multiple chunks **together**, use `cork()` to collect them and `uncork()` to flush them in one go.  

ğŸ”¹ **Example:**  
```javascript
writeStream.cork();  // Start buffering writes
writeStream.write('Part 1 ');
writeStream.write('Part 2 ');
writeStream.write('Part 3 ');
writeStream.uncork(); // Flush all at once
```
ğŸ’¡ **Without `cork()`**, each `write()` would result in a separate system call.

---

## **4ï¸âƒ£ writeStream.uncork()**  
âœ… **Purpose:** Flushes out **buffered writes** when using `cork()`.  
âœ… **When to Use:** Call this **after corking** to ensure all writes are processed together.  

ğŸ”¹ **Example:** (Same as above)  
```javascript
writeStream.cork();
writeStream.write('Buffered Data 1 ');
writeStream.write('Buffered Data 2 ');
writeStream.uncork(); // All data is written at once
```

---

## **5ï¸âƒ£ writeStream.setDefaultEncoding(encoding)**  
âœ… **Purpose:** Sets the default encoding for writing data.  
âœ… **When to Use:** If you plan to write text in a **specific encoding format** (default is `utf8`).  

ğŸ”¹ **Example:**  
```javascript
writeStream.setDefaultEncoding('utf16le'); // Set encoding to UTF-16
writeStream.write('Hello in UTF-16!\n');
```

---

## **6ï¸âƒ£ writeStream.destroy([error])**  
âœ… **Purpose:** Forcefully destroys the stream and releases resources.  
âœ… **When to Use:** If an error occurs, or you want to **stop writing immediately**.  

ğŸ”¹ **Example:**  
```javascript
writeStream.destroy(new Error('Something went wrong!'));
```

ğŸ’¡ **If you don't pass an error, it just closes the stream normally.**

---

## **7ï¸âƒ£ writeStream.write() vs. writeStream.end() vs. writeStream.destroy()**  
| Method | Purpose | When to Use |
|--------|---------|------------|
| `.write(chunk)` | Write data to the stream | For regular data writing |
| `.end([chunk])` | End writing & close the stream | After writing the last data chunk |
| `.destroy([error])` | Forcefully stop the stream | On error or when manual termination is needed |

---

### **Final Example: Using Multiple Methods Together** ğŸ¯  
```javascript
const fs = require('fs');

const writeStream = fs.createWriteStream('example.txt');

writeStream.write('Hello, ');
writeStream.cork();
writeStream.write('this is ');
writeStream.write('Node.js ');
writeStream.uncork();
writeStream.write('Writable Streams!\n');
writeStream.end('End of file.\n');
```

---

### **Key Takeaways:**  
âœ… **Use `write()`** for writing data.  
âœ… **Use `end()`** when you are done writing.  
âœ… **Use `cork()` and `uncork()`** for efficient batch writing.  
âœ… **Use `destroy()`** if something goes wrong.  
âœ… **Use `setDefaultEncoding()`** for encoding control.  

This helps in managing streams **efficiently** and ensures your **Node.js app runs smoothly**. ğŸš€



---