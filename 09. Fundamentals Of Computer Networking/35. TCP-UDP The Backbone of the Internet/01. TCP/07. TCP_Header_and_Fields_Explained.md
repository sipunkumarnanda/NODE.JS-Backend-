

# 🌐 **TCP Header and Its Fields Explained**

The **Transmission Control Protocol (TCP)** is a connection-oriented protocol that ensures reliable data transfer. Each TCP segment carries a **header** containing important information needed to manage the connection and data delivery.

---

## 🧩 **1. TCP Header Overview**

A **TCP segment** consists of:

* **Header** – contains control information (20–60 bytes).
* **Data** – the actual payload being sent.

**TCP header size:** Minimum 20 bytes (without options) and can extend up to 60 bytes (if options are used).

📌 The TCP header ensures:

* Reliable delivery ✅
* Proper sequencing 🔢
* Flow control 🌊
* Error detection 🛡️

---

## 📝 **2. Fields in a TCP Header**

Here’s a breakdown of each field:

### 1️⃣ **Source Port (16 bits)**

* Indicates the sender’s port number.
* Helps the receiver know which application sent the data.

### 2️⃣ **Destination Port (16 bits)**

* Indicates the receiver’s port number.
* Directs the segment to the correct application on the destination device.

### 3️⃣ **Sequence Number (32 bits)**

* Marks the position of the first byte of data in this segment.
* Ensures **in-order delivery** and **tracking of lost packets**.

### 4️⃣ **Acknowledgment Number (32 bits)**

* Indicates the next expected byte from the sender.
* Only valid if the **ACK flag** is set.
* Ensures **reliable communication**.

### 5️⃣ **Data Offset / Header Length (4 bits)**

* Tells how long the TCP header is.
* Helps the receiver know where the **data/payload** begins.

### 6️⃣ **Reserved (3 bits)**

* Reserved for future use.
* Always set to 0 in current implementations.

### 7️⃣ **Flags / Control Bits (9 bits)** 🚦

| Flag    | Meaning                                         |
| ------- | ----------------------------------------------- |
| **URG** | Urgent Pointer valid                            |
| **ACK** | Acknowledgment field is valid                   |
| **PSH** | Push data immediately to application            |
| **RST** | Reset the connection                            |
| **SYN** | Synchronize sequence numbers (connection setup) |
| **FIN** | Finish, close connection                        |
| **ECE** | Explicit Congestion Notification Echo           |
| **CWR** | Congestion Window Reduced                       |
| **NS**  | ECN-nonce concealment protection                |

> These flags control the connection state and flow of data.

### 8️⃣ **Window Size (16 bits)** 🌊

* Specifies how many bytes the sender is allowed to send before receiving an ACK.
* Used for **flow control** to prevent buffer overflow.

### 9️⃣ **Checksum (16 bits)** 🛡️

* Ensures **error-free transmission**.
* Calculated for both header and data.
* If a segment is corrupted, the receiver discards it.

### 🔟 **Urgent Pointer (16 bits)**

* Only valid if **URG flag** is set.
* Points to the last byte of urgent data.
* Helps send high-priority information immediately.

### 1️⃣1️⃣ **Options (Variable length)** ⚙️

* Optional extra information, e.g., **Maximum Segment Size (MSS)**, **timestamps**, **window scaling**.
* Makes TCP more flexible and efficient.

### 1️⃣2️⃣ **Padding**

* Ensures header is a multiple of 32 bits.

---

## ⚙️ **3. How TCP Header Works in Practice**

1. **Connection Establishment** – SYN flag used with sequence numbers.
2. **Data Transfer** – ACK, sequence numbers, and window size ensure ordered, reliable delivery.
3. **Flow Control** – Window size prevents sender from overwhelming receiver.
4. **Error Detection** – Checksum validates segment integrity.
5. **Connection Termination** – FIN and ACK flags close the connection gracefully.

> TCP header is the backbone of **reliable communication**, ensuring data arrives complete, ordered, and without duplication.

---

## 🔄 **4. TCP Header in Action – Example**

Suppose your browser requests a webpage:

* **Source Port:** 54321 (browser)
* **Destination Port:** 80 (HTTP server)
* **Sequence Number:** 1001
* **ACK Number:** 0 (first segment)
* **Flags:** SYN set (start connection)
* **Window Size:** 65535 bytes

Once the handshake is complete, TCP uses **ACK, sequence numbers, and window size** for reliable data delivery.

---

## 🧭 **Key Takeaways**

* TCP header contains **control, addressing, and sequencing information**.
* Flags like **SYN, ACK, FIN** manage the connection lifecycle.
* Sequence and acknowledgment numbers guarantee **reliable, ordered delivery**.
* Flow control and checksums prevent **data loss and corruption**.
* Options allow **advanced TCP features** for efficiency.

---