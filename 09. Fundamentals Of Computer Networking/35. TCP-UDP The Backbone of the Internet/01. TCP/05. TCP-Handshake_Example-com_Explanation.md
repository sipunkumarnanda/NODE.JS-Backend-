

# 🌍 **TCP Handshake Explained Using `example.com`**

When you type **`example.com`** in your browser and hit **Enter**, several things happen behind the scenes before you actually see the website appear.

We’ll break this into two main parts:

1. 🔹 **Connection Establishment (Three-Way Handshake)**
2. 🔹 **Connection Termination (Four-Way Handshake)**

---

## ⚙️ Step 0: DNS Resolution (Before the TCP Handshake)

Before any TCP connection begins, your system needs to **know the IP address** of `example.com`.

* Your computer asks the **DNS server** (Domain Name System) to resolve the domain name to an IP address (like `93.184.216.34`).
* Once your browser gets the IP address, it knows *where* to connect.

Now, the **TCP connection** begins with that IP address.

---

## 🔹 **Three-Way Handshake (Connection Establishment)**

The **three-way handshake** establishes a reliable connection between your device (client) and the server (`example.com`).

Let’s visualize what happens when your browser connects to the web server’s **TCP port 80 (HTTP)** or **443 (HTTPS)**.

---

### 🧩 **Step 1: SYN (Synchronize)**

➡️ **Your Device → Server**

When you hit **Enter** after typing `example.com`, your browser (the client) sends a **TCP SYN (synchronize)** packet to the server.

**What happens:**

* The SYN packet includes a **random sequence number** (e.g., `Seq = 1000`) to start communication.
* This packet tells the server:

  > “Hey, I’d like to start a reliable TCP connection with you!”

**Purpose:**
It’s like knocking on someone’s door to start a conversation — “Can we talk?”

📘 **Example:**
Your computer → `example.com`
`SYN, Seq=1000`

---

### 🧩 **Step 2: SYN-ACK (Synchronize-Acknowledge)**

➡️ **Server → Your Device**

The server at `example.com` receives your SYN packet and replies with a **SYN-ACK** packet.

**What happens:**

* The server acknowledges your sequence number (by sending `Ack = 1001`).
* It also sends its own **sequence number** (e.g., `Seq = 5000`) to start its side of the conversation.
* This means:

  > “Got your request! Here’s my own sequence number so you can talk to me too.”

**Purpose:**
It’s like someone answering the door and saying, “Sure, I’m ready to talk — and here’s how we’ll communicate.”

📘 **Example:**
Server → Your computer
`SYN, ACK, Seq=5000, Ack=1001`

---

### 🧩 **Step 3: ACK (Acknowledge)**

➡️ **Your Device → Server**

Finally, your device sends an **ACK** packet back to the server.

**What happens:**

* It acknowledges the server’s sequence number (`Ack = 5001`).
* Now both sides are synchronized — they both know where to start sending and receiving data.

**Purpose:**
It’s like replying, “Great! I’ve got your message. Let’s begin exchanging data.”

📘 **Example:**
Your computer → Server
`ACK, Seq=1001, Ack=5001`

---

### ✅ **Result: Connection Established**

Now the **TCP connection** between your device and `example.com` is successfully established.
Your browser can now start sending **HTTP requests** (like `GET /index.html`) over this reliable TCP connection.

> 💡 TCP guarantees that all packets (webpage data, images, scripts, etc.) will arrive correctly and in order.

---

## 🧠 **Behind the Scenes During This Phase**

* **TCP buffers** are created on both sides to manage data flow.
* **Window sizes** (used for flow control) are exchanged.
* **Congestion control algorithms** (like Slow Start) begin managing the sending rate.
* The **TLS handshake** (for HTTPS connections) happens next — to establish encryption.

---

## 🔹 **Four-Way Handshake (Connection Termination)**

When you close the tab or the browser finishes downloading the webpage, the TCP connection must end gracefully — so no data is lost.

This process is called the **four-way handshake**.

---

### 🧩 **Step 1: FIN (Finish) – Client Requests to End**

➡️ **Your Device → Server**

Once the browser has finished receiving all the data from `example.com`, it sends a **FIN (Finish)** packet to signal that it wants to close the connection.

**Purpose:**

> “I’m done sending data. You can close the connection when ready.”

📘 **Example:**
Your computer → Server
`FIN, Seq=3000`

---

### 🧩 **Step 2: ACK (Acknowledge)**

➡️ **Server → Your Device**

The server acknowledges the FIN packet by sending an **ACK**.

**Purpose:**

> “Got it. I know you’re done sending. I might still have some data to send, though.”

📘 **Example:**
Server → Your computer
`ACK, Seq=7000, Ack=3001`

---

### 🧩 **Step 3: FIN (Server Finishes)**

➡️ **Server → Your Device**

After sending any remaining data, the server sends its own **FIN** packet to indicate it is also done sending data.

**Purpose:**

> “I’m done too — ready to close the connection.”

📘 **Example:**
Server → Your computer
`FIN, Seq=7001`

---

### 🧩 **Step 4: ACK (Final Acknowledgment)**

➡️ **Your Device → Server**

Finally, your device acknowledges the server’s FIN packet by sending an **ACK** back.

**Purpose:**

> “Acknowledged — closing connection now.”

📘 **Example:**
Your computer → Server
`ACK, Ack=7002`

---

### ✅ **Result: Connection Closed Gracefully**

Both sides now know that the communication is complete and close the connection cleanly.
Resources (like buffers, sockets, and ports) are released from both systems.

> 💡 This ensures no data is left “in transit” and that all information was received before shutting down.

---

## 🔄 **Summary: From Start to Finish (Typing `example.com`)**

| **Step**              | **Action**                    | **Description**                       |
| --------------------- | ----------------------------- | ------------------------------------- |
| **1. DNS Resolution** | `example.com → 93.184.216.34` | Domain name resolved to an IP address |
| **2. TCP SYN**        | Client → Server               | Start handshake                       |
| **3. TCP SYN-ACK**    | Server → Client               | Acknowledge and respond               |
| **4. TCP ACK**        | Client → Server               | Connection established                |
| **5. HTTP Request**   | Client → Server               | Browser sends “GET /”                 |
| **6. HTTP Response**  | Server → Client               | Webpage data is sent back             |
| **7. TCP FIN/ACKs**   | Both sides                    | Connection gracefully terminated      |

---

## 🧭 **Key Takeaways**

* 🔐 TCP ensures **reliable and ordered** data delivery.
* ⚙️ The **Three-Way Handshake** sets up a **synchronized session**.
* 📴 The **Four-Way Handshake** ensures **graceful termination**.
* 🌍 When you visit a website like `example.com`, these steps happen in **milliseconds**, enabling smooth browsing experiences every time.

---