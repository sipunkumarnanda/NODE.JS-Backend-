

# ğŸŒ **TCP Handshake Explained Using `example.com`**

When you type **`example.com`** in your browser and hit **Enter**, several things happen behind the scenes before you actually see the website appear.

Weâ€™ll break this into two main parts:

1. ğŸ”¹ **Connection Establishment (Three-Way Handshake)**
2. ğŸ”¹ **Connection Termination (Four-Way Handshake)**

---

## âš™ï¸ Step 0: DNS Resolution (Before the TCP Handshake)

Before any TCP connection begins, your system needs to **know the IP address** of `example.com`.

* Your computer asks the **DNS server** (Domain Name System) to resolve the domain name to an IP address (like `93.184.216.34`).
* Once your browser gets the IP address, it knows *where* to connect.

Now, the **TCP connection** begins with that IP address.

---

## ğŸ”¹ **Three-Way Handshake (Connection Establishment)**

The **three-way handshake** establishes a reliable connection between your device (client) and the server (`example.com`).

Letâ€™s visualize what happens when your browser connects to the web serverâ€™s **TCP port 80 (HTTP)** or **443 (HTTPS)**.

---

### ğŸ§© **Step 1: SYN (Synchronize)**

â¡ï¸ **Your Device â†’ Server**

When you hit **Enter** after typing `example.com`, your browser (the client) sends a **TCP SYN (synchronize)** packet to the server.

**What happens:**

* The SYN packet includes a **random sequence number** (e.g., `Seq = 1000`) to start communication.
* This packet tells the server:

  > â€œHey, Iâ€™d like to start a reliable TCP connection with you!â€

**Purpose:**
Itâ€™s like knocking on someoneâ€™s door to start a conversation â€” â€œCan we talk?â€

ğŸ“˜ **Example:**
Your computer â†’ `example.com`
`SYN, Seq=1000`

---

### ğŸ§© **Step 2: SYN-ACK (Synchronize-Acknowledge)**

â¡ï¸ **Server â†’ Your Device**

The server at `example.com` receives your SYN packet and replies with a **SYN-ACK** packet.

**What happens:**

* The server acknowledges your sequence number (by sending `Ack = 1001`).
* It also sends its own **sequence number** (e.g., `Seq = 5000`) to start its side of the conversation.
* This means:

  > â€œGot your request! Hereâ€™s my own sequence number so you can talk to me too.â€

**Purpose:**
Itâ€™s like someone answering the door and saying, â€œSure, Iâ€™m ready to talk â€” and hereâ€™s how weâ€™ll communicate.â€

ğŸ“˜ **Example:**
Server â†’ Your computer
`SYN, ACK, Seq=5000, Ack=1001`

---

### ğŸ§© **Step 3: ACK (Acknowledge)**

â¡ï¸ **Your Device â†’ Server**

Finally, your device sends an **ACK** packet back to the server.

**What happens:**

* It acknowledges the serverâ€™s sequence number (`Ack = 5001`).
* Now both sides are synchronized â€” they both know where to start sending and receiving data.

**Purpose:**
Itâ€™s like replying, â€œGreat! Iâ€™ve got your message. Letâ€™s begin exchanging data.â€

ğŸ“˜ **Example:**
Your computer â†’ Server
`ACK, Seq=1001, Ack=5001`

---

### âœ… **Result: Connection Established**

Now the **TCP connection** between your device and `example.com` is successfully established.
Your browser can now start sending **HTTP requests** (like `GET /index.html`) over this reliable TCP connection.

> ğŸ’¡ TCP guarantees that all packets (webpage data, images, scripts, etc.) will arrive correctly and in order.

---

## ğŸ§  **Behind the Scenes During This Phase**

* **TCP buffers** are created on both sides to manage data flow.
* **Window sizes** (used for flow control) are exchanged.
* **Congestion control algorithms** (like Slow Start) begin managing the sending rate.
* The **TLS handshake** (for HTTPS connections) happens next â€” to establish encryption.

---

## ğŸ”¹ **Four-Way Handshake (Connection Termination)**

When you close the tab or the browser finishes downloading the webpage, the TCP connection must end gracefully â€” so no data is lost.

This process is called the **four-way handshake**.

---

### ğŸ§© **Step 1: FIN (Finish) â€“ Client Requests to End**

â¡ï¸ **Your Device â†’ Server**

Once the browser has finished receiving all the data from `example.com`, it sends a **FIN (Finish)** packet to signal that it wants to close the connection.

**Purpose:**

> â€œIâ€™m done sending data. You can close the connection when ready.â€

ğŸ“˜ **Example:**
Your computer â†’ Server
`FIN, Seq=3000`

---

### ğŸ§© **Step 2: ACK (Acknowledge)**

â¡ï¸ **Server â†’ Your Device**

The server acknowledges the FIN packet by sending an **ACK**.

**Purpose:**

> â€œGot it. I know youâ€™re done sending. I might still have some data to send, though.â€

ğŸ“˜ **Example:**
Server â†’ Your computer
`ACK, Seq=7000, Ack=3001`

---

### ğŸ§© **Step 3: FIN (Server Finishes)**

â¡ï¸ **Server â†’ Your Device**

After sending any remaining data, the server sends its own **FIN** packet to indicate it is also done sending data.

**Purpose:**

> â€œIâ€™m done too â€” ready to close the connection.â€

ğŸ“˜ **Example:**
Server â†’ Your computer
`FIN, Seq=7001`

---

### ğŸ§© **Step 4: ACK (Final Acknowledgment)**

â¡ï¸ **Your Device â†’ Server**

Finally, your device acknowledges the serverâ€™s FIN packet by sending an **ACK** back.

**Purpose:**

> â€œAcknowledged â€” closing connection now.â€

ğŸ“˜ **Example:**
Your computer â†’ Server
`ACK, Ack=7002`

---

### âœ… **Result: Connection Closed Gracefully**

Both sides now know that the communication is complete and close the connection cleanly.
Resources (like buffers, sockets, and ports) are released from both systems.

> ğŸ’¡ This ensures no data is left â€œin transitâ€ and that all information was received before shutting down.

---

## ğŸ”„ **Summary: From Start to Finish (Typing `example.com`)**

| **Step**              | **Action**                    | **Description**                       |
| --------------------- | ----------------------------- | ------------------------------------- |
| **1. DNS Resolution** | `example.com â†’ 93.184.216.34` | Domain name resolved to an IP address |
| **2. TCP SYN**        | Client â†’ Server               | Start handshake                       |
| **3. TCP SYN-ACK**    | Server â†’ Client               | Acknowledge and respond               |
| **4. TCP ACK**        | Client â†’ Server               | Connection established                |
| **5. HTTP Request**   | Client â†’ Server               | Browser sends â€œGET /â€                 |
| **6. HTTP Response**  | Server â†’ Client               | Webpage data is sent back             |
| **7. TCP FIN/ACKs**   | Both sides                    | Connection gracefully terminated      |

---

## ğŸ§­ **Key Takeaways**

* ğŸ” TCP ensures **reliable and ordered** data delivery.
* âš™ï¸ The **Three-Way Handshake** sets up a **synchronized session**.
* ğŸ“´ The **Four-Way Handshake** ensures **graceful termination**.
* ğŸŒ When you visit a website like `example.com`, these steps happen in **milliseconds**, enabling smooth browsing experiences every time.

---