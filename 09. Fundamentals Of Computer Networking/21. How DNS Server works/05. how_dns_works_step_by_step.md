

# ğŸŒ How DNS Resolution Works: Step by Step

DNS (Domain Name System) is like the **phonebook of the internet**. It translates **human-readable domain names** like `example.com` into **IP addresses** like `93.184.216.34`.

When you type a domain into your browser, DNS resolution goes through **multiple layers** before returning the IP address. Letâ€™s go step by step.

---

## 1ï¸âƒ£ Browser Cache ğŸ§ ğŸ’¾

* Modern browsers store recently visited domain resolutions in **cache** to speed up access.
* **Example:** You type `example.com`. If your browser has it cached, it directly returns the IP without querying DNS servers.

**Benefits:**

* Fast access ğŸš€
* Reduces network traffic ğŸŒ

---

## 2ï¸âƒ£ Operating System (OS) Cache ğŸ’»ğŸ—‚ï¸

* If the browser cache doesnâ€™t have the record, the OS checks its **DNS resolver cache**.
* The OS cache stores **recently resolved domains system-wide**, not just for a single browser.

**Check OS cache:**

* Windows: `ipconfig /displaydns`
* macOS: `sudo killall -INFO mDNSResponder`
* Linux: Depends on DNS service (e.g., `systemd-resolved`, `nscd`)

**Example:**

* Browser misses `example.com` â†’ OS cache has `93.184.216.34` â†’ used immediately.

---

## 3ï¸âƒ£ ISP DNS Server Cache ğŸ–§ğŸ¢

* If OS cache doesnâ€™t have the record, the query is sent to your **ISPâ€™s DNS server**.
* The ISP DNS server keeps a **cache of recently resolved domains**.

**Example:**

* Your ISP DNS server has recently resolved `example.com` â†’ it responds immediately with `93.184.216.34`.

**Benefits:**

* Speeds up resolution ğŸŒŸ
* Reduces repeated traffic to higher-level DNS servers

---

## 4ï¸âƒ£ Recursive Query to Root DNS Servers ğŸŒ³ğŸ›°ï¸

* If the ISP DNS server doesnâ€™t have the domain cached, it performs a **recursive query** starting with the **root DNS servers**.
* There are **13 logical root server addresses** named `A` to `M`:

| Root Server | Logical Name       | Example Physical Locations  |
| ----------- | ------------------ | --------------------------- |
| A           | a.root-servers.net | USA, Europe, Asia (anycast) |
| B           | b.root-servers.net | USA, Europe, Asia           |
| C           | c.root-servers.net | USA, Europe, Asia           |
| D           | d.root-servers.net | USA, Europe, Asia           |
| E           | e.root-servers.net | USA, Europe, Asia           |
| F           | f.root-servers.net | USA, Europe, Asia           |
| G           | g.root-servers.net | USA, Europe, Asia           |
| H           | h.root-servers.net | USA, Europe, Asia           |
| I           | i.root-servers.net | USA, Europe, Asia           |
| J           | j.root-servers.net | USA, Europe, Asia           |
| K           | k.root-servers.net | USA, Europe, Asia           |
| L           | l.root-servers.net | USA, Europe, Asia           |
| M           | m.root-servers.net | USA, Europe, Asia           |

**Important:**

* There are **13 logical root servers**, but each has **many physical servers worldwide** using **anycast** for speed and redundancy.

**Role:**

* Root servers **donâ€™t know the IP of the final domain**.
* They direct queries to the **TLD (Top-Level Domain) servers**.

---

## 5ï¸âƒ£ TLD DNS Servers ğŸ·ï¸ğŸŒ

* **TLD (Top-Level Domain) servers** are responsible for **.com, .org, .net, .in**, etc.
* After querying the root server, the ISP DNS is referred to the **TLD server**.

**Example:**

* For `example.com`, the root server points to **.com TLD servers**.

**Role:**

* TLD servers **know which authoritative server handles the specific domain**.

---

## 6ï¸âƒ£ Authoritative DNS Server ğŸ¢ğŸ”‘

* The **authoritative DNS server** for `example.com` holds the **actual IP address**.
* Once the recursive DNS query reaches here, it **returns the final answer**.

**Example:**

* Authoritative server says: `example.com â†’ 93.184.216.34`

---

## 7ï¸âƒ£ Glue Records ğŸ§©ğŸ“

* Sometimes, the **name server for a domain is within the domain itself**.
* Glue records are **IP addresses provided by parent DNS zones** to prevent **circular dependency**.

**Example:**

* Domain: `example.com`
* Name server: `ns1.example.com`
* Glue record provides IP: `192.0.2.53`
* Without glue records, the resolver wouldnâ€™t know where to start querying `ns1.example.com`.

---

## 8ï¸âƒ£ DNS Resolution Flow Summary ğŸŒŸ

Hereâ€™s the **full step-by-step flow**:

1. Browser cache ğŸ§  â†’ Found? âœ… Use IP
2. OS cache ğŸ’» â†’ Found? âœ… Use IP
3. ISP DNS cache ğŸ¢ â†’ Found? âœ… Use IP
4. Root DNS server ğŸŒ³ â†’ Provides TLD server
5. TLD server ğŸ·ï¸ â†’ Provides authoritative server
6. Authoritative server ğŸ¢ â†’ Returns final IP
7. Browser connects ğŸ’»â¡ï¸ğŸŒ

**Example with `example.com`**:

```
Browser â†’ OS Cache â†’ ISP DNS â†’ Root (.) â†’ .com TLD â†’ Authoritative (example.com) â†’ IP: 93.184.216.34
```

---

## 9ï¸âƒ£ Visual Representation ğŸŒˆ

* Browser ğŸ§  â†’ OS Cache ğŸ’» â†’ ISP DNS ğŸ¢ â†’ Root ğŸŒ³ â†’ TLD ğŸ·ï¸ â†’ Authoritative ğŸ¢ â†’ IP ğŸŒ â†’ Browser ğŸ’»
* Every stage can **cache results** to speed up future queries â±ï¸

---

## 10ï¸âƒ£ Key Takeaways ğŸ’¡

* DNS resolution is **hierarchical and recursive**.
* **Caches** at each level improve speed and reduce network traffic.
* **13 root servers** are logical, with **anycasted physical servers worldwide**.
* **Glue records** prevent circular dependencies.
* Manual queries can trace this flow using commands like:

```bash
nslookup example.com
dig example.com +trace
```

---