

# 🔑 Connect to an EC2 Ubuntu Server Using `.pem` Key and Update OS 🖥️☁️

This guide explains **how to securely connect to your Ubuntu EC2 instance** from a local machine using a `.pem` key, and **how to update and upgrade the OS**, with full explanation of each step and command.

---

## ☁️ 1. Prerequisites

Before you start, make sure you have:

1. **EC2 instance running Ubuntu** (Free Tier works fine).
2. **Private key `.pem` file** downloaded when creating the EC2 instance.
3. **Public IP** or **Public DNS** of your EC2 instance.
4. A **terminal** (Linux/Mac) or **WSL / Git Bash / PuTTY** on Windows.

> **Important:** Keep your `.pem` file safe. Never share it.

---

## 🖥️ 2. Step 1 — Set permissions for `.pem` key

AWS requires that your private key has **strict permissions**.
Open your terminal and run:

```bash
chmod 400 /path/to/your-key.pem
```

**Explanation:**

* `chmod` → changes file permissions
* `400` → read-only for owner (others cannot read/write)
* AWS will **refuse the connection** if permissions are too open. 🔒

---

## 🔌 3. Step 2 — Connect to the EC2 instance

Use the SSH command:

```bash
ssh -i /path/to/your-key.pem ubuntu@<Public-IP>
```

**Explanation:**

* `ssh` → command to connect securely over the internet
* `-i /path/to/key.pem` → specifies your private key
* `ubuntu` → default username for Ubuntu EC2 instances
* `<Public-IP>` → your EC2 instance’s public IPv4 address

> Tip: For Windows users with PuTTY, you need to convert `.pem` → `.ppk` using **PuTTYgen**.

If successful, you’ll see a prompt like:

```
Welcome to Ubuntu 22.04 LTS
ubuntu@ip-xx-xx-xx-xx:~$
```

---

## 🛠️ 4. Step 3 — Update Ubuntu OS

It’s important to **update your system packages** to the latest version for security and stability.

### Step 3a — Update package list

```bash
sudo apt update
```

**Explanation:**

* `sudo` → run command as superuser (root)
* `apt` → Ubuntu’s package manager
* `update` → fetches the latest list of available packages and versions

> **Note:** This does **not upgrade** any packages yet.

### Step 3b — Upgrade installed packages

```bash
sudo apt upgrade -y
```

**Explanation:**

* `upgrade` → installs the latest version of all packages currently installed
* `-y` → automatically answers “yes” to all prompts

> Now your system packages are updated safely.

### Step 3c — Optional: Full upgrade (handles dependencies)

```bash
sudo apt full-upgrade -y
```

**Explanation:**

* `full-upgrade` → also installs/removes packages to satisfy dependencies
* Useful if you want a completely updated system without manual intervention

### Step 3d — Optional: Remove unused packages

```bash
sudo apt autoremove -y
```

**Explanation:**

* Removes unnecessary packages that were installed as dependencies but are no longer needed
* Helps free up disk space

---

## 📋 5. Step 4 — Verify updates

Check Ubuntu version and kernel:

```bash
lsb_release -a
uname -r
```

* `lsb_release -a` → shows Ubuntu version and codename
* `uname -r` → shows Linux kernel version

Check if packages are up to date:

```bash
sudo apt update
```

If everything is updated, it will say:

```
0 upgraded, 0 newly installed, 0 to remove
```

---

## ✅ 6. Quick recap

| Step | Command                                  | Purpose                             |
| ---- | ---------------------------------------- | ----------------------------------- |
| 1️⃣  | `chmod 400 your-key.pem`                 | Secure your private key             |
| 2️⃣  | `ssh -i your-key.pem ubuntu@<Public-IP>` | Connect to EC2 Ubuntu instance      |
| 3a️⃣ | `sudo apt update`                        | Refresh package list                |
| 3b️⃣ | `sudo apt upgrade -y`                    | Upgrade installed packages          |
| 3c️⃣ | `sudo apt full-upgrade -y`               | Full upgrade including dependencies |
| 3d️⃣ | `sudo apt autoremove -y`                 | Remove unused packages              |
| 4️⃣  | `lsb_release -a` / `uname -r`            | Verify OS and kernel version        |

---

💡 **Tip:**

* Always **update Ubuntu** after launching a new instance.
* For servers exposed to the internet, updates improve **security**.
* Use `exit` to log out from the EC2 instance safely:

```bash
exit
```

---