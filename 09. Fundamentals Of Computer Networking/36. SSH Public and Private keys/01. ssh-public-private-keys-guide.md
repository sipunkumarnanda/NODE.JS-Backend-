

# 🔐 SSH Public and Private Keys — Complete Guide

---

## 🌍 What is SSH?

**SSH (Secure Shell)** is a protocol used to securely connect to remote systems — such as servers or network devices — over an encrypted channel.
It protects against eavesdropping and tampering by encrypting all communication.

You often use SSH to:

* 💻 Log into remote servers (`ssh user@host`)
* 📁 Copy files (`scp`, `sftp`)
* ⚙️ Automate tasks securely

---

## 🗝️ SSH Keys — The Core Idea

Instead of typing a password every time you connect, **SSH key-based authentication** uses a pair of cryptographic keys:

1. **Public Key** 🔓
2. **Private Key** 🔒

These two keys are mathematically linked — what one encrypts, the other can decrypt — but the private key cannot be derived from the public one.

---

## 🔓 The Public Key

**What it is:**

* The public part of your SSH key pair.
* Safe to share with others (e.g., servers you want to access).
* Stored on the **remote server** in the file:

  ```
  ~/.ssh/authorized_keys
  ```

**Purpose:**
When you try to connect, the server uses your public key to create a challenge that only your private key can solve.

**Example (looks like this):**

```
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAICxZ6... user@machine
```

---

## 🔒 The Private Key

**What it is:**

* The secret part of your SSH key pair — **never share it!**
* Stored securely on your **local machine**, usually at:

  ```
  ~/.ssh/id_ed25519
  ```
* Protected with file permissions (`chmod 600`) and optionally with a passphrase.

**Purpose:**
It proves your identity during authentication by decrypting the server’s challenge.

If someone gains access to your private key, they can log in to servers as you — so protect it carefully! 🛑

---

## ⚙️ How SSH Key Authentication Works (Step-by-Step)

1. 🧩 **Key generation:** You generate a key pair using `ssh-keygen`.
2. 📤 **Public key placement:** You copy the public key to the remote server (`~/.ssh/authorized_keys`).
3. 🔐 **Connection attempt:** You run `ssh user@server`.
4. 🧮 **Challenge-response:**

   * The server sends a random challenge encrypted with your public key.
   * Your client decrypts it using your private key.
5. ✅ **Verification:**

   * If decryption is successful, authentication passes — no password needed!

All this happens securely inside the SSH protocol.

---

## 🧰 How to Generate SSH Keys

### Linux/macOS:

```bash
ssh-keygen -t ed25519 -C "your_email@example.com"
```

*(Use RSA if needed: `-t rsa -b 4096`)*

This creates:

* `~/.ssh/id_ed25519` → 🔒 Private key
* `~/.ssh/id_ed25519.pub` → 🔓 Public key

### Windows (PowerShell):

```powershell
ssh-keygen -t ed25519 -C "your_email@example.com"
```

---

## 🚀 Using Your SSH Key

### Copy public key to a remote server:

```bash
ssh-copy-id -i ~/.ssh/id_ed25519.pub user@remotehost
```

Or manually append the key to:

```
~/.ssh/authorized_keys
```

### Connect using key authentication:

```bash
ssh -i ~/.ssh/id_ed25519 user@remotehost
```

---

## 🧾 Common SSH Key Types

| Key Type           | Description                                 | Recommended?                     |
| ------------------ | ------------------------------------------- | -------------------------------- |
| **ED25519**        | Modern, fast, strong curve cryptography     | ✅ Yes                            |
| **RSA (4096-bit)** | Classic and widely supported                | ✅ Yes (if ED25519 not supported) |
| **ECDSA**          | Efficient but can have compatibility issues | ⚠️ Use with care                 |
| **DSA**            | Deprecated, insecure                        | ❌ Avoid                          |

---

## 🛡️ Security Best Practices

* 🔑 Always use a **passphrase** for your private key.
* 🔒 Set file permissions:

  ```bash
  chmod 700 ~/.ssh
  chmod 600 ~/.ssh/id_*
  ```
* 🧰 Use **ssh-agent** to securely store and reuse decrypted keys in memory.
* 🚫 Never email or upload your private key.
* 🔁 Rotate your keys periodically.
* 🧱 Disable password authentication on servers (`PasswordAuthentication no` in `/etc/ssh/sshd_config`).

---

## ⚡ Bonus: Quick Verification

* View public key fingerprint:

  ```bash
  ssh-keygen -lf ~/.ssh/id_ed25519.pub
  ```
* Test key-based login:

  ```bash
  ssh -v user@server
  ```

  (Add `-v` for verbose output to debug issues.)

---

## 📘 TL;DR — Quick Summary

* SSH keys replace passwords for secure, automated authentication.
* They come in **pairs** — public (share) and private (keep secret).
* Store the public key on the server, keep the private key on your computer.
* Use `ssh-keygen` to create, `ssh-copy-id` to deploy, and `ssh` to connect.
* Always protect private keys with permissions and passphrases. 🔐

---